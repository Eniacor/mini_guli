<view class="autio" hidden="true">
    <audio src="{{current.src}}" poster="{{current.poster}}" name="{{current.name}}" author="{{current.author}}" action="{{audioAction}}" bindplay="audioPlayed" bindtimeupdate="audioTimeUpdated" controls></audio>
</view>
<view class="dati">
    <view class="head">
        <view class="head_left">{{data.question_type_name}}</view>
        <view class="head_middle">{{data.title}}</view>
        <view class="head_right">答题记录</view>
    </view>
    <view class="title">
        <text class="title_left backcolor_yellow">#{{data.id}}</text>
        <text class="title_middle backcolor_yellow">{{data.addtime}}</text>
        <i-cell title="禁用点击和手势选择星" class="star">
            <i-rate disabled="{{true}}" value="{{4}}"></i-rate>
        </i-cell>
    </view>
    <import src="../../../../common/component/wxParse/wxParse.wxml" />
    <view class="wxParse">
        <template is="wxParse" data="{{wxParseData:article.nodes}}" />
    </view>
    <view class="audio">
        <view class="audio_left" bindtap="playAudio" wx:if="{{isPlay==0}}">
            <image src="" />
        </view>
        <view class="audio_left" bindtap="pauseAudio" wx:else>
            <image src="" style="background:red;" />
        </view>
        <view class="audio_right">
            <view class="right_top">
                <i-progress percent="{{(currentS/totalS*100)}}" status="{{ status }}" hideInfo="true" strokeWidth="5"></i-progress>
            </view>
            <view class="right_bottom">
                <view class="bottom_left">{{currentTime}}</view>
                <view class="bottom_right">{{totalTime}}</view>
            </view>
        </view>
    </view>
    <view class="start">
        <image class="img1" src="" />
        <text>暂未开始</text>
        <image class="img2" src="" />
    </view>
    <view class="tab">
        <i-tabs current="{{ current }}" bindchange="handleChange" color="#d43c33">
            <i-tab key="tab1" title="优秀练习"></i-tab>
            <i-tab key="tab2" title="我的练习"></i-tab>
        </i-tabs>
    </view>
    <view class="discuz" wx:if="{{current=='tab1'}}">
        <view class="discuz_title"></view>
        <view class="items">
            <view class="item" wx:if="{{data.discuz!=null}}" wx:for="{{data.discuz}}" wx:key="unique">
                <view class="item_left">
                    <image src="{{item.avatarurl}}" />
                </view>
                <view class="item_right">
                    <view class="right_name">{{item.nickname}}</view>
                    <view class="right_content">
                        <view wx:if="{{item.recording_seconds>0}}">
                            <view class="content_audio" wx:if="{{cstatus==item.id}}" bindtap="handleS">
                                <image src="" style="background: #d43c33;" />
                                <text>{{item.recording_seconds}}"</text>
                            </view>
                            <view class="content_audio" wx:else data-id="{{item.id}}" data-id="{{item.id}}" data-url="{{item.recording_url}}" bindtap="handleP">
                                <image src="" style="background:#222;" />
                                <text>{{item.recording_seconds}}"</text>
                            </view>
                        </view>
                        {{item.content}}
                        <view class="citems">
                            <view class="citem" wx:if="{{item.remark}}" wx:for="{{item.remark}}" wx:for-index="idc" wx:for-item="itemc" wx:key="unique">
                                <view class="citem_left">
                                    <image src="{{itemc.avatarurl}}" />
                                </view>
                                <view class="citem_right">
                                    <view class="cright_name">{{itemc.nickname}}</view>
                                    <view class="cright_content">
                                        <view wx:if="{{itemc.recording_seconds>0}}">
                                            <view class="content_audio" wx:if="{{cstatus==item.id+'.'+itemc.id}}" bindtap="handleS">
                                                <image src="" style="background: #d43c33;" />
                                                <text>{{itemc.recording_seconds}}"</text>
                                            </view>
                                            <view class="content_audio" wx:else data-id="{{item.id+'.'+itemc.id}}" data-url="{{itemc.recording_url}}" bindtap="handleP">
                                                <image src="" style="background:#222;" />
                                                <text>{{itemc.recording_seconds}}"</text>
                                            </view>
                                        </view>
                                        {{itemc.content}}
                                    </view>
                                </view>
                                <view class="citem_middle"></view>
                            </view>
                        </view>
                    </view>
                    <view class="right_time">
                        <view class="time_left">{{item.addtime}}</view>
                        <view class="time_right" data-id="{{item.id}}" bindtap="discuzLike">
                            <text>{{item.like_num}}</text>
                            <image src="/images/static/index_recall_detail2.png" />
                        </view>
                        <view class="time_right" data-id="{{item.id}}" bindtap="skipPage" style="margin-right:60rpx;" bindtap="skipPage" data-url="/pages/material/list/discuz/index?id={{item.id}}&type=3&back={{data.id}}" data-type="0">
                            <text>点评</text>
                            <image src="/images/static/index_recall_detail2.png" />
                        </view>
                    </view>
                </view>
            </view>
            <view class="empty" wx:if="{{data.discuz==null}}">暂无练习!</view>
        </view>
    </view>
    <view class="discuz" wx:if="{{current=='tab2'}}">
        <view class="discuz_title"></view>
        <view class="items">
            <view class="item" wx:if="{{data.mydiscuz!=null}}" wx:for="{{data.mydiscuz}}" wx:key="unique">
                <view class="item_left">
                    <image src="{{item.avatarurl}}" />
                </view>
                <view class="item_right">
                    <view class="right_name">{{item.nickname}}</view>
                    <view class="right_content">
                        <view wx:if="{{item.recording_seconds}}">
                            <view class="content_audio" wx:if="{{cstatus==item.id}}" bindtap="handleS">
                                <image src="" style="background: #d43c33;" />
                                <text>{{item.recording_seconds}}"</text>
                            </view>
                            <view class="content_audio" wx:else data-id="{{item.id}}" data-id="{{item.id}}" data-url="{{item.recording_url}}" bindtap="handleP">
                                <image src="" style="background:#222;" />
                                <text>{{item.recording_seconds}}"</text>
                            </view>
                        </view>
                        {{item.content}}
                        <view class="citems">
                            <view class="citem" wx:if="{{item.remark}}" wx:for="{{item.remark}}" wx:for-index="idc" wx:for-item="itemc" wx:key="unique">
                                <view class="citem_left">
                                    <image src="{{itemc.avatarurl}}" />
                                </view>
                                <view class="citem_right">
                                    <view class="cright_name">{{itemc.nickname}}</view>
                                    <view class="cright_content">
                                        <view wx:if="{{itemc.recording_seconds>0}}">
                                            <view class="content_audio" wx:if="{{cstatus==item.id+'.'+itemc.id}}" bindtap="handleS">
                                                <image src="" style="background: #d43c33;" />
                                                <text>{{itemc.recording_seconds}}"</text>
                                            </view>
                                            <view class="content_audio" wx:else data-id="{{item.id+'.'+itemc.id}}" data-url="{{itemc.recording_url}}" bindtap="handleP">
                                                <image src="" style="background:#222;" />
                                                <text>{{itemc.recording_seconds}}"</text>
                                            </view>
                                        </view>
                                        {{itemc.content}}
                                    </view>
                                </view>
                                <view class="citem_middle"></view>
                            </view>
                        </view>
                    </view>
                    <view class="right_time">
                        <view class="time_left">{{item.addtime}}</view>
                        <view class="time_right" data-id="{{item.id}}" bindtap="discuzLike">
                            <text>{{item.like_num}}</text>
                            <image src="/images/static/index_recall_detail2.png" />
                        </view>
                    </view>
                </view>
            </view>
            <view class="empty" wx:if="{{data.mydiscuz==null}}">暂无练习!</view>
        </view>
    </view>
    <view class="bottom">
        <view class="item" bindtap="handlePrev">上一题</view>
        <view class="item" wx:if="{{status==1}}" bindtap="handlePlay">开始录音</view>
        <view class="item" wx:if="{{status==2}}" bindtap="handleStop">停止录音</view>
        <view class="item" bindtap="handlePrev">下一题</view>
    </view>
</view>
<audio hidden="true" src="{{url}}" id="myAudio" controls></audio>